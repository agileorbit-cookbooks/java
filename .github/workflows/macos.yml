---
name: 'macos'
'on':
  pull_request:
  push:
    branches:
      - master
jobs:
    macos:
      runs-on: macos-latest
      steps:
        - name: Check out code
          uses: actions/checkout@master
        - name: Install Chef
          uses: actionshub/chef-install@master
        - name: Run Test Kitchen
          env:
            CHEF_LICENSE: accept-no-persist
            KITCHEN_LOCAL_YAML: kitchen.macos.yml
            TERM: xterm-256color
          run: |
            kitchen converge adoptopenjdk-14-macos
            source /etc/profile
            echo "sourced profile for JAVA_HOME"
            echo "New JAVA home after Chef run is: ${JAVA_HOME}"
            kitchen verify adoptopenjdk-14-macos
